<idea-plugin>
    <id>saker.build.ide.intellij</id>
    <name>Saker.build system plug-in for IntelliJ</name>
    <vendor email="support@saker.build"
            url="https://saker.build">saker.build
    </vendor>

    <description>Plug-in for saker.build system integration</description>

    <!-- please see http://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html
         on how to target different products -->
    <depends>com.intellij.modules.platform</depends>

    <applicationListeners>
        <listener class="saker.build.ide.intellij.SakerBuildAppLifecycleListener"
                  topic="com.intellij.ide.AppLifecycleListener"/>
    </applicationListeners>

    <extensions defaultExtensionNs="com.intellij">
        <toolWindow id="saker.build"
                    anchor="bottom"
                    factoryClass="saker.build.ide.intellij.console.SakerBuildConsoleToolWindowFactory"/>
        <projectConfigurable id="SAKER_BUILD_PROJECT_SETTINGS"
                             displayName="Saker.build Project Settings"
                             provider="saker.build.ide.intellij.properties.SakerBuildProjectConfigurableProvider"
                             groupId="build"
                             dynamic="true"
                             groupWeight="1000">
            <!--
            The saker.build project settings has a large groupWeight in order to make it appear above other settings.
            This is advantageous as if someone uses saker.build for a project, we consider it to be the main
            (and maybe only) build tool that is used for a given project. It is the core and significant component
            of the build behaviour for a given project. Therefore we aim to present it at the head of the Build tool
            settings tree.
            -->
        </projectConfigurable>
        <applicationConfigurable
                id="SAKER_BUILD_APPLICATION_SETTINGS"
                groupId="build.tools"
                displayName="Saker.build"
                provider="saker.build.ide.intellij.properties.SakerBuildApplicationConfigurableProvider"
                dynamic="true"/>
        <fileType name="Saker.build script file"
                  implementationClass="saker.build.ide.intellij.BuildScriptFileType"
                  fieldName="INSTANCE"
                  language="SAKER_BUILD_SCRIPT_LANGUAGE"
                  id="SAKER_BUILD_SCRIPT_FILE_TYPE"/>
        <fileTypeFactory implementation="saker.build.ide.intellij.BuildScriptFileTypeFactory"/>
        <lang.parserDefinition implementationClass="saker.build.ide.intellij.BuildScriptParserDefinition"
                               language="SAKER_BUILD_SCRIPT_LANGUAGE"/>
        <editorHighlighterProvider filetype="Saker.build script file"
                                   implementationClass="saker.build.ide.intellij.BuildScriptEditorHighlighterProvider"/>
        <lang.documentationProvider implementationClass="saker.build.ide.intellij.BuildScriptDocumentationProvider"
                                    language="SAKER_BUILD_SCRIPT_LANGUAGE"/>
        <lang.psiStructureViewFactory implementationClass="saker.build.ide.intellij.BuildScriptStructureViewFactory"
                                      language="SAKER_BUILD_SCRIPT_LANGUAGE"/>
        <completion.contributor implementationClass="saker.build.ide.intellij.BuildScriptCompletionContributor"
                                language="SAKER_BUILD_SCRIPT_LANGUAGE"
                                id="SAKER_BUILD_SCRIPT_COMPLETION_CONTRIBUTOR"/>
    </extensions>

    <actions>
        <action class="saker.build.ide.intellij.ConfigureSakerBuildProjectAction"
                text="Add saker.build support">
            <add-to-group group-id="FileMainSettingsGroup"
                          relative-to-action="ShowProjectStructureSettings"
                          anchor="after"/>
        </action>
        <action id="SAKER_BUILD_REMOVE_NATURE"
                class="saker.build.ide.intellij.UnconfigureSakerBuildProjectAction"
                text="Remove saker.build support">
            <add-to-group group-id="FileMainSettingsGroup"
                          relative-to-action="ShowProjectStructureSettings"
                          anchor="after"/>
        </action>
        <action id="SAKER_BUILD_RUN_BUILD"
                class="saker.build.ide.intellij.RunBuildAction"
                text="Run saker.build"
                description="Execute project build with saker.build">
            <keyboard-shortcut first-keystroke="control alt shift F9"
                               keymap="$default"/>
            <add-to-group group-id="BuildMenu"/>
        </action>
        <group id="SAKER_BUILD_TARGETS_ACION_GROUP"
               text="Saker.build"
               class="saker.build.ide.intellij.SakerBuildActionGroup">
            <add-to-group group-id="MainMenu"/>
        </group>
    </actions>
    <idea-version since-build="193"/>
</idea-plugin>